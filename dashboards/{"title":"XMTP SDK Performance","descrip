{
  "title": "XMTP SDK Performance",
  "description": "Metrics for XMTP SDK operations (DNS, TLS, Server Processing)",
  "widgets": [
    {
      "id": 8225839199420642,
      "definition": {
        "title": "Operation Duration (ms)",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.duration{metric_type:operation} by {operation}",
                "aggregator": "avg"
              }
            ],
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "conditional_formats": [
              {
                "comparator": "<=",
                "value": 100,
                "palette": "white_on_green"
              },
              {
                "comparator": "<=",
                "value": 300,
                "palette": "white_on_yellow"
              },
              {
                "comparator": ">",
                "value": 300,
                "palette": "white_on_red"
              }
            ]
          }
        ],
        "autoscale": true,
        "precision": 2
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 2,
        "height": 2
      }
    },
    {
      "id": 5793020678655389,
      "definition": {
        "title": "TLS Handshake Average (ms)",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.duration{metric_type:network,network_phase:tls_handshake}",
                "aggregator": "avg"
              }
            ],
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "conditional_formats": [
              {
                "comparator": "<=",
                "value": 100,
                "palette": "white_on_green"
              },
              {
                "comparator": "<=",
                "value": 300,
                "palette": "white_on_yellow"
              },
              {
                "comparator": ">",
                "value": 300,
                "palette": "white_on_red"
              }
            ]
          }
        ],
        "autoscale": true,
        "precision": 2
      },
      "layout": {
        "x": 2,
        "y": 0,
        "width": 2,
        "height": 2
      }
    },
    {
      "id": 4370752746591489,
      "definition": {
        "title": "SDK Operations Performance (Ordered by Duration)",
        "type": "query_table",
        "requests": [
          {
            "queries": [
              {
                "data_source": "metrics",
                "name": "query1",
                "query": "avg:xmtp.sdk.duration{metric_type:operation} by {operation}"
              }
            ],
            "response_format": "scalar",
            "order": "desc",
            "limit": 100,
            "sort": {
              "count": 500,
              "order_by": [
                {
                  "type": "formula",
                  "index": 0,
                  "order": "desc"
                }
              ]
            },
            "formulas": [
              {
                "alias": "Duration (ms)",
                "formula": "query1"
              }
            ]
          }
        ],
        "has_search_bar": "auto"
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 8745223285623120,
      "definition": {
        "title": "SDK Operations Performance",
        "show_legend": true,
        "legend_layout": "auto",
        "type": "timeseries",
        "requests": [
          {
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.duration{metric_type:operation} by {operation}"
              }
            ],
            "response_format": "timeseries",
            "display_type": "line"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 2,
        "width": 6,
        "height": 4
      }
    },
    {
      "id": 8568497028830122,
      "definition": {
        "title": "Network Performance",
        "show_legend": true,
        "legend_layout": "auto",
        "type": "timeseries",
        "requests": [
          {
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.duration{metric_type:network} by {network_phase}"
              }
            ],
            "response_format": "timeseries",
            "display_type": "line"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 6,
        "width": 6,
        "height": 4
      }
    }
  ],
  "template_variables": [
    {
      "name": "env",
      "prefix": "env",
      "available_values": [],
      "default": "dev"
    },
    {
      "name": "geo",
      "prefix": "geo",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "test",
      "prefix": "test",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "libxmtp",
      "prefix": "libxmtp",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "operation",
      "prefix": "operation",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "metric_type",
      "prefix": "metric_type",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "template_variable_presets": [
    {
      "name": "outside-us",
      "template_variables": [
        {
          "name": "geo",
          "value": "south-america"
        }
      ]
    },
    {
      "name": "us",
      "template_variables": [
        {
          "name": "geo",
          "value": "us"
        }
      ]
    }
  ]
}
