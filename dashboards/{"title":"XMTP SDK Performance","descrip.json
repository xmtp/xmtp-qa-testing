{
  "title": "XMTP SDK Performance",
  "description": "Metrics for XMTP SDK operations (DNS, TLS, Server Processing)",
  "widgets": [
    {
      "id": 1035665042386260,
      "definition": {
        "title": "Create DM Average (ms)",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createDM{*}",
                "aggregator": "avg"
              }
            ],
            "formulas": [{ "formula": "query1" }],
            "conditional_formats": [
              { "comparator": "<=", "value": 100, "palette": "white_on_green" },
              {
                "comparator": "<=",
                "value": 300,
                "palette": "white_on_yellow"
              },
              { "comparator": ">", "value": 300, "palette": "white_on_red" }
            ]
          }
        ],
        "autoscale": true,
        "precision": 2
      },
      "layout": { "x": 0, "y": 0, "width": 2, "height": 2 }
    },
    {
      "id": 1070356135122934,
      "definition": {
        "title": "TLS Handshake Average (ms)",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createDM.network.tls_handshake{*}",
                "aggregator": "avg"
              }
            ],
            "formulas": [{ "formula": "query1" }],
            "conditional_formats": [
              { "comparator": "<=", "value": 100, "palette": "white_on_green" },
              {
                "comparator": "<=",
                "value": 300,
                "palette": "white_on_yellow"
              },
              { "comparator": ">", "value": 300, "palette": "white_on_red" }
            ]
          }
        ],
        "autoscale": true,
        "precision": 2
      },
      "layout": { "x": 2, "y": 0, "width": 2, "height": 2 }
    },
    {
      "id": 2086792500299912,
      "definition": {
        "title": "Content Transfer Average (ms)",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createDM.network.content_transfer{*}",
                "aggregator": "avg"
              }
            ],
            "formulas": [{ "formula": "query1" }],
            "conditional_formats": [
              { "comparator": "<=", "value": 100, "palette": "white_on_green" },
              {
                "comparator": "<=",
                "value": 300,
                "palette": "white_on_yellow"
              },
              { "comparator": ">", "value": 300, "palette": "white_on_red" }
            ]
          }
        ],
        "autoscale": true,
        "precision": 2
      },
      "layout": { "x": 4, "y": 0, "width": 2, "height": 2 }
    },
    {
      "id": 4572751823816670,
      "definition": {
        "title": "Top SDK Operations by Average Time (ms)",
        "type": "toplist",
        "requests": [
          {
            "queries": [
              {
                "data_source": "metrics",
                "name": "query1",
                "query": "avg:xmtp.sdk.ts_performance.createDM{*}",
                "aggregator": "avg"
              },
              {
                "data_source": "metrics",
                "name": "query2",
                "query": "avg:xmtp.sdk.ts_performance.sendGM{*}",
                "aggregator": "avg"
              },
              {
                "data_source": "metrics",
                "name": "query3",
                "query": "avg:xmtp.sdk.ts_performance.receiveGM{*}",
                "aggregator": "avg"
              },
              {
                "data_source": "metrics",
                "name": "query4",
                "query": "avg:xmtp.sdk.ts_performance.createGroup{*}",
                "aggregator": "avg"
              },
              {
                "data_source": "metrics",
                "name": "query5",
                "query": "avg:xmtp.sdk.ts_performance.createGroupByInboxIds{*}",
                "aggregator": "avg"
              },
              {
                "data_source": "metrics",
                "name": "query6",
                "query": "avg:xmtp.sdk.ts_performance.updateGroupName{*}",
                "aggregator": "avg"
              },
              {
                "data_source": "metrics",
                "name": "query7",
                "query": "avg:xmtp.sdk.ts_performance.addMembers{*}",
                "aggregator": "avg"
              }
            ],
            "response_format": "scalar",
            "conditional_formats": [
              { "comparator": "<=", "value": 100, "palette": "white_on_green" },
              {
                "comparator": "<=",
                "value": 300,
                "palette": "white_on_yellow"
              },
              { "comparator": ">", "value": 300, "palette": "white_on_red" }
            ],
            "formulas": [
              { "formula": "query1", "alias": "Create DM" },
              { "formula": "query2", "alias": "Send GM" },
              { "formula": "query3", "alias": "Receive GM" },
              { "formula": "query4", "alias": "Create Group" },
              { "formula": "query5", "alias": "Create Group By Inbox Ids" },
              { "formula": "query6", "alias": "Update Group Name" },
              { "formula": "query7", "alias": "Add Members" }
            ]
          }
        ]
      },
      "layout": { "x": 6, "y": 0, "width": 4, "height": 2 }
    },
    {
      "id": 8656283950468599,
      "definition": {
        "title": "SDK Operations Performance",
        "show_legend": true,
        "legend_layout": "auto",
        "type": "timeseries",
        "requests": [
          {
            "formulas": [
              { "formula": "query1", "alias": "Create DM Time" },
              { "formula": "query2", "alias": "Send GM Time" },
              { "formula": "query3", "alias": "Receive GM Time" },
              { "formula": "query4", "alias": "Create Group Time" },
              {
                "formula": "query5",
                "alias": "Create Group By Inbox Ids Time"
              },
              { "formula": "query6", "alias": "Update Group Name Time" },
              { "formula": "query7", "alias": "Add Members Time" },
              { "formula": "query8", "alias": "Remove Members Time" },
              { "formula": "query9", "alias": "Send Group Message Time" },
              { "formula": "query10", "alias": "Receive Group Message Time" },
              {
                "formula": "query11",
                "alias": "Receive Group all streams Time"
              },
              { "formula": "query12", "alias": "Create Large Group Time" }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createDM{*}"
              },
              {
                "name": "query2",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.sendGM{*}"
              },
              {
                "name": "query3",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.receiveGM{*}"
              },
              {
                "name": "query4",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createGroup{*}"
              },
              {
                "name": "query5",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createGroupByInboxIds{*}"
              },
              {
                "name": "query6",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.updateGroupName{*}"
              },
              {
                "name": "query7",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.addMembers{*}"
              },
              {
                "name": "query8",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.removeMembers{*}"
              },
              {
                "name": "query9",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.sendGroupMessage{*}"
              },
              {
                "name": "query10",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.receiveGroupMessage{*}"
              },
              {
                "name": "query11",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.receiveGroupAllStreams{*}"
              },
              {
                "name": "query12",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createLargeGroup{*}"
              }
            ],
            "response_format": "timeseries",
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 2, "width": 6, "height": 4 }
    },
    {
      "id": 332458450576053,
      "definition": {
        "title": "Network Performance",
        "show_legend": true,
        "legend_layout": "auto",
        "type": "timeseries",
        "requests": [
          {
            "formulas": [
              { "formula": "query1", "alias": "TLS Handshake Time" },
              { "formula": "query2", "alias": "Content Transfer Time" }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createDM.network.tls_handshake{*}"
              },
              {
                "name": "query2",
                "data_source": "metrics",
                "query": "avg:xmtp.sdk.ts_performance.createDM.network.content_transfer{*}"
              }
            ],
            "response_format": "timeseries",
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 6, "width": 6, "height": 4 }
    }
  ],
  "template_variables": [
    {
      "name": "qa_env",
      "prefix": "qa_env",
      "available_values": [],
      "default": "dev"
    },
    {
      "name": "qa_geo",
      "prefix": "qa_geo",
      "available_values": [],
      "default": "us"
    },
    {
      "name": "qa_test",
      "prefix": "qa_test",
      "available_values": [],
      "default": "ts_performance"
    },
    {
      "name": "qa_libxmtp",
      "prefix": "qa_libxmtp",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "qa_operation",
      "prefix": "qa_operation",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}
f