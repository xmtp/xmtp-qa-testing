2025-03-12T15:49:08.038884Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-12T15:49:08.038949Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-12T15:49:08.084632Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 73 }
2025-03-12T15:49:08.084655Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.084659Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.084667Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.084675Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-12T15:49:08.084749Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:49:08.085182Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" installation_id="c12093858fca893cb14d155a3b84ef370ff35311ea5436f656a39b7d0b015493"
2025-03-12T15:49:08.087531Z  INFO xmtp_id::associations::builder: adding verified signature signer=0x1dd038e110b53152af9491cf490c36b1cc720daa missing_signatures=[Address("0x1dd038e110b53152af9491cf490c36b1cc720daa")]
2025-03-12T15:49:08.087580Z  INFO xmtp_mls::client: registering identity
2025-03-12T15:49:08.088363Z DEBUG upload_key_package: xmtp_api::mls: upload key packages inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5"
2025-03-12T15:49:08.088385Z DEBUG upload_key_package: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:49:08.088423Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.088435Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-12T15:49:08.088478Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-12T15:49:08.123011Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 73 }
2025-03-12T15:49:08.123035Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.123038Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.123046Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.123054Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-12T15:49:08.123079Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:49:08.123506Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id="aa794550962e38a3d61c6a7c1f2d2846c62049cfea942b834af1fa8bacc05ada"
2025-03-12T15:49:08.124975Z  INFO xmtp_id::associations::builder: adding verified signature signer=0x1c541a1c11095aa7b36cf138922da1bf6a6bd54c missing_signatures=[Address("0x1c541a1c11095aa7b36cf138922da1bf6a6bd54c")]
2025-03-12T15:49:08.125018Z  INFO xmtp_mls::client: registering identity
2025-03-12T15:49:08.125795Z DEBUG upload_key_package: xmtp_api::mls: upload key packages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:49:08.125818Z DEBUG upload_key_package: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:49:08.125851Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.125865Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-12T15:49:08.125906Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-12T15:49:08.393092Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 436 }
2025-03-12T15:49:08.393119Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.393123Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.404637Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.404662Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-12T15:49:08.404668Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:49:08.404713Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:49:08.404787Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:49:08.405334Z DEBUG tower::buffer::worker: service.ready=true processing request
2025-03-12T15:49:08.405369Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.405380Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-12T15:49:08.405416Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-12T15:49:08.493828Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 436 }
2025-03-12T15:49:08.493856Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.493860Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.493868Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.493876Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-12T15:49:08.493914Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:49:08.493994Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:49:08.494075Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:49:08.494912Z DEBUG tower::buffer::worker: service.ready=true processing request
2025-03-12T15:49:08.494952Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.494974Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-12T15:49:08.495010Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-12T15:49:08.532341Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 436 }
2025-03-12T15:49:08.532367Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.532370Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.532379Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.532386Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }

 ❯ bugs/bug_installation/test.test.ts 0/4

 Test Files 0 passed (1)
      Tests 0 passed (4)
   Start at 12:49:04
   Duration 3.93s
2025-03-12T15:49:08.808310Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 301 }
2025-03-12T15:49:08.808330Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.808333Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:49:08.827504Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:49:08.827526Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(7) }
2025-03-12T15:49:08.827530Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:49:08.827610Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"]
2025-03-12T15:49:08.828048Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34", sequence_id: Some(69025) }] len=1}: tower::buffer::worker: service.ready=true processing request
 ❯ bugs/bug_installation/test.test.ts (4 tests | 4 skipped) 3383ms
   ↓ bug_installation > inboxState
   ↓ bug_installation > should create a group with bob and alice
   ↓ bug_installation > should create a group with bob and alice
   ↓ bug_installation > joe with alice

 ❯ bugs/bug_installation/test.test.ts 1/4


⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Suites 1 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  bugs/bug_installation/test.test.ts > bug_installation
Error: API error: API client error: endpoint: publish_identity_update, source: status: InvalidArgument, message: "Multiple create operations detected", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯


 Test Files  1 failed (1)
      Tests  4 skipped (4)
   Start at  12:49:04
   Duration  4.18s (transform 62ms, setup 0ms, collect 640ms, tests 3.38s, environment 0ms, prepare 33ms)

fabrizioguespe@fabrizios-MacBook-Pro qa-testing % yarn test bug_installation

 RUN  v3.0.6 /Users/fabrizioguespe/DevRel/qa-testing
      API started at http://localhost:51204/

(node:31987) ExperimentalWarning: Importing JSON modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
stdout | bugs/bug_installation/test.test.ts
[2025-03-12T15:49:46.053Z] [info] envPath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.env

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:49:46.056Z] [info] Generating new keys for bob
[2025-03-12T15:49:46.086Z] [info] Generating new keys for alice
[2025-03-12T15:49:46.090Z] [info] Generating new keys for joe
[2025-03-12T15:49:46.093Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a
[2025-03-12T15:49:46.093Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a
[2025-03-12T15:49:46.094Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:49:49.768Z] [warn] [joe-a] Create XMTP client v:e8c52be 3.674s
[2025-03-12T15:49:49.768Z] [info] [joe-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:49:49.903Z] [warn] [alice-a] Create XMTP client v:e8c52be 3.810s
[2025-03-12T15:49:49.904Z] [info] [alice-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:49:49.921Z] [warn] [bob-a] Create XMTP client v:e8c52be 3.828s
[2025-03-12T15:49:49.921Z] [info] [bob-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation > inboxState
[2025-03-12T15:49:49.923Z] [info] Installations 1

stdout | bugs/bug_installation/test.test.ts > bug_installation > inboxState
[2025-03-12T15:49:49.923Z] [info] Installations 1

stdout | bugs/bug_installation/test.test.ts > bug_installation > inboxState
[2025-03-12T15:49:49.924Z] [info] Installations 1

 ✓ bugs/bug_installation/test.test.ts (4 tests) 9423ms
   ✓ bug_installation > inboxState
   ✓ bug_installation > should create a group with bob and alice 1922ms
   ✓ bug_installation > should create a group with bob and alice 1759ms
   ✓ bug_installation > joe with alice 1870ms

 Test Files  1 passed (1)
      Tests  4 passed (4)
   Start at  12:49:45
   Duration  10.21s (transform 61ms, setup 0ms, collect 664ms, tests 9.42s, environment 0ms, prepare 32ms)

fabrizioguespe@fabrizios-MacBook-Pro qa-testing % yarn test bug_installation

 RUN  v3.0.6 /Users/fabrizioguespe/DevRel/qa-testing
      API started at http://localhost:51204/

(node:32031) ExperimentalWarning: Importing JSON modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
stdout | bugs/bug_installation/test.test.ts
[2025-03-12T15:50:01.558Z] [info] envPath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.env

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:50:01.587Z] [info] Using env keys for bob: 0x1c541A1c11095aa7b36Cf138922Da1bF6a6bD54c
[2025-03-12T15:50:01.592Z] [info] Using env keys for alice: 0x95484cb08200C26F69131CD5cb5a1b3acb0FAa30
[2025-03-12T15:50:01.595Z] [info] Using env keys for joe: 0x1dd038E110b53152af9491cf490C36B1cC720dAa
[2025-03-12T15:50:01.597Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a
[2025-03-12T15:50:01.597Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a
[2025-03-12T15:50:01.597Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:50:03.861Z] [warn] [bob-a] Create XMTP client v:e8c52be 2.264s
[2025-03-12T15:50:03.861Z] [info] [bob-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:50:03.906Z] [warn] [alice-a] Create XMTP client v:e8c52be 2.309s
[2025-03-12T15:50:03.907Z] [info] [alice-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:50:04.013Z] [warn] [joe-a] Create XMTP client v:e8c52be 2.415s
[2025-03-12T15:50:04.013Z] [info] [joe-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation > inboxState
[2025-03-12T15:50:04.019Z] [info] Installations 3

stdout | bugs/bug_installation/test.test.ts > bug_installation > inboxState
[2025-03-12T15:50:04.023Z] [info] Installations 10

 ❯ bugs/bug_installation/test.test.ts (4 tests | 3 failed) 5843ms
   × bug_installation > inboxState 12ms
     → Association error: Multiple create operations detected
   ✓ bug_installation > should create a group with bob and alice 2811ms
   × bug_installation > should create a group with bob and alice 376ms
     → ClientError: Installation diff error: Association error: Multiple create operations detected
   × bug_installation > joe with alice 192ms
     → ClientError: Installation diff error: Association error: Multiple create operations detected

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  bugs/bug_installation/test.test.ts > bug_installation > inboxState
Error: Association error: Multiple create operations detected
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  bugs/bug_installation/test.test.ts > bug_installation > should create a group with bob and alice
 FAIL  bugs/bug_installation/test.test.ts > bug_installation > joe with alice
Error: ClientError: Installation diff error: Association error: Multiple create operations detected
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯


 Test Files  1 failed (1)
      Tests  3 failed | 1 passed (4)
   Start at  12:50:00
   Duration  6.61s (transform 60ms, setup 0ms, collect 642ms, tests 5.84s, environment 0ms, prepare 33ms)

fabrizioguespe@fabrizios-MacBook-Pro qa-testing % yarn test bug_installation

 RUN  v3.0.6 /Users/fabrizioguespe/DevRel/qa-testing
      API started at http://localhost:51204/

(node:32085) ExperimentalWarning: Importing JSON modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
stdout | bugs/bug_installation/test.test.ts
[2025-03-12T15:50:24.337Z] [info] envPath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.env

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:50:24.366Z] [info] Using env keys for bob: 0x1c541A1c11095aa7b36Cf138922Da1bF6a6bD54c
[2025-03-12T15:50:24.370Z] [info] Using env keys for alice: 0x95484cb08200C26F69131CD5cb5a1b3acb0FAa30
[2025-03-12T15:50:24.373Z] [info] Using env keys for joe: 0x1dd038E110b53152af9491cf490C36B1cC720dAa
[2025-03-12T15:50:24.376Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a
[2025-03-12T15:50:24.376Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a
[2025-03-12T15:50:24.376Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a

 ❯ bugs/bug_installation/test.test.ts (4 tests | 4 skipped) 3460ms
   ↓ bug_installation > inboxState
   ↓ bug_installation > should create a group with bob and alice
   ↓ bug_installation > should create a group with bob and alice
   ↓ bug_installation > joe with alice

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Suites 1 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  bugs/bug_installation/test.test.ts > bug_installation
Error: API error: API client error: endpoint: publish_identity_update, source: status: InvalidArgument, message: "Multiple create operations detected", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯


 Test Files  1 failed (1)
      Tests  4 skipped (4)
   Start at  12:50:23
   Duration  4.23s (transform 60ms, setup 0ms, collect 644ms, tests 3.46s, environment 0ms, prepare 33ms)

fabrizioguespe@fabrizios-MacBook-Pro qa-testing % yarn test bug_installation

 RUN  v3.0.6 /Users/fabrizioguespe/DevRel/qa-testing
      API started at http://localhost:51204/

(node:32149) ExperimentalWarning: Importing JSON modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
stdout | bugs/bug_installation/test.test.ts
[2025-03-12T15:51:15.718Z] [info] envPath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.env

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:51:15.742Z] [info] Using env keys for bob: 0x1c541A1c11095aa7b36Cf138922Da1bF6a6bD54c
[2025-03-12T15:51:15.746Z] [info] Using env keys for alice: 0x95484cb08200C26F69131CD5cb5a1b3acb0FAa30
[2025-03-12T15:51:15.747Z] [info] Using env keys for joe: 0x1dd038E110b53152af9491cf490C36B1cC720dAa
[2025-03-12T15:51:15.750Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a
[2025-03-12T15:51:15.750Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a
[2025-03-12T15:51:15.750Z] [info] basePath /Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a


 ❯ bugs/bug_installation/test.test.ts 0/4

 Test Files 0 passed (1)
      Tests 0 passed (4)
   Start at 12:51:15
   Duration 910ms
2025-03-12T15:51:16.740311Z DEBUG h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:16.740341Z DEBUG h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:16.740345Z DEBUG h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 53 }
2025-03-12T15:51:16.740348Z DEBUG h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:16.740351Z DEBUG h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:16.740360Z DEBUG h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:16.740365Z DEBUG h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-12T15:51:16.740370Z DEBUG h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:16.740513Z DEBUG h2::codec::framed_write: send frame=GoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) }
2025-03-12T15:51:16.740521Z DEBUG h2::proto::connection: Connection::poll; connection error error=GoAway(b"", NO_ERROR, Library)
2025-03-12T15:51:16.845644Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-12T15:51:16.845995Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-12T15:51:16.901065Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-12T15:51:16.901371Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-12T15:51:16.914582Z DEBUG h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:16.914605Z DEBUG h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:16.914609Z DEBUG h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 53 }

 ❯ bugs/bug_installation/test.test.ts 0/4

 Test Files 0 passed (1)
      Tests 0 passed (4)
   Start at 12:51:15
   Duration 1.92s
2025-03-12T15:51:17.058458Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.132.13.169:443
2025-03-12T15:51:17.058717Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.132.13.169:443
2025-03-12T15:51:17.389645Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-12T15:51:17.389899Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-12T15:51:17.389913Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:17.390121Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-12T15:51:17.391441Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a/0x1dd038e110b53152af9491cf490c36b1cc720daa-e8c52be-dev] exists? [true]
2025-03-12T15:51:17.391533Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-12T15:51:17.391570Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:17.391582Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-12T15:51:17.392416Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a/0x1dd038e110b53152af9491cf490c36b1cc720daa-e8c52be-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a/0x1dd038e110b53152af9491cf490c36b1cc720daa-e8c52be-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a/0x1dd038e110b53152af9491cf490c36b1cc720daa-e8c52be-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/joe/a/0x1dd038e110b53152af9491cf490c36b1cc720daa-e8c52be-dev
2025-03-12T15:51:17.398565Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-12T15:51:17.398597Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-12T15:51:17.399465Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-12T15:51:17.399569Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-12T15:51:17.399572Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-12T15:51:17.399628Z  INFO xmtp_mls::identity: Initializing identity
2025-03-12T15:51:17.400090Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [217, 101, 245, 39, 242, 84, 114, 90, 69, 70, 113, 58, 6, 178, 37, 199, 148, 182, 76, 193, 84, 96, 249, 152, 122, 245, 44, 58, 152, 103, 108, 182]), EdwardsPoint{
        X: FieldElement51([1230853018568476, 1108823764295278, 1133668911271782, 1695981706709371, 138385134860627]),
        Y: FieldElement51([469427241206985, 374665754092082, 717797800575117, 1524645772895650, 456082164560382]),
        Z: FieldElement51([1015246940451461, 1928503319800982, 2018892312310540, 1189547306898423, 1342259545474869]),
        T: FieldElement51([223209662488932, 1126390298871100, 1046286759739589, 2100291617630822, 2130686998408824])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4039666435636132613532326433356664313261653830653664333837303464346663383332626232636165383265626635666234633533363466313732326635 } }, signature_request: None, is_ready: true })
2025-03-12T15:51:17.400187Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="d965f527f254725a4546713a06b225c794b64cc15460f9987af52c3a98676cb6" inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5"
2025-03-12T15:51:17.400195Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" installation_id="d965f527f254725a4546713a06b225c794b64cc15460f9987af52c3a98676cb6"
2025-03-12T15:51:17.400204Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5"]
2025-03-12T15:51:17.400325Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5", sequence_id: Some(64637) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:17.400478Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.400522Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-12T15:51:17.400530Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-12T15:51:17.420873Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-12T15:51:17.420923Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-12T15:51:17.420927Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:17.420954Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-12T15:51:17.420968Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-12T15:51:17.420976Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:17.420980Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-12T15:51:17.421000Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a/0x95484cb08200c26f69131cd5cb5a1b3acb0faa30-e8c52be-dev] exists? [true]
2025-03-12T15:51:17.421148Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a/0x95484cb08200c26f69131cd5cb5a1b3acb0faa30-e8c52be-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a/0x95484cb08200c26f69131cd5cb5a1b3acb0faa30-e8c52be-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a/0x95484cb08200c26f69131cd5cb5a1b3acb0faa30-e8c52be-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/alice/a/0x95484cb08200c26f69131cd5cb5a1b3acb0faa30-e8c52be-dev
2025-03-12T15:51:17.423914Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-12 12:51:17.423: sqlcipher_set_log: set log to stderr
2025-03-12T15:51:17.423941Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-12T15:51:17.424705Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-12T15:51:17.424778Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-12T15:51:17.424780Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-12T15:51:17.424808Z  INFO xmtp_mls::identity: Initializing identity
2025-03-12T15:51:17.425103Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [107, 196, 150, 14, 20, 6, 48, 225, 26, 78, 239, 14, 240, 195, 39, 9, 16, 175, 59, 128, 130, 79, 123, 197, 214, 227, 224, 55, 203, 96, 19, 236]), EdwardsPoint{
        X: FieldElement51([2033286085581699, 2012797508656475, 43451168365173, 2166949959536797, 50369612486901]),
        Y: FieldElement51([1608645013148566, 1848214811925591, 1514119224838444, 982131193709168, 386241532604104]),
        Z: FieldElement51([2122815962568573, 1652781540732229, 1270888683699164, 803432538752007, 1542547199877225]),
        T: FieldElement51([1108678187095585, 2157300626815379, 884577845575843, 53720064817611, 792153291310884])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4066373261623135356464393333373366396439323764346230393263336337656336623031636437366332376139373063623361663836663030383839663334 } }, signature_request: None, is_ready: true })
2025-03-12T15:51:17.425137Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec" inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:17.425143Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id="6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec"
2025-03-12T15:51:17.425146Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"]
2025-03-12T15:51:17.425223Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34", sequence_id: Some(73016) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:17.425272Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.425285Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-12T15:51:17.425288Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-12T15:51:17.570019Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:17.570112Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:17.606265Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:17.606347Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:17.611596Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-12T15:51:17.611659Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-12T15:51:17.611676Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:17.611797Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-12T15:51:17.612010Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a/0x1c541a1c11095aa7b36cf138922da1bf6a6bd54c-e8c52be-dev] exists? [true]
2025-03-12T15:51:17.615337Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-12T15:51:17.615377Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:17.615389Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-12T15:51:17.616567Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a/0x1c541a1c11095aa7b36cf138922da1bf6a6bd54c-e8c52be-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a/0x1c541a1c11095aa7b36cf138922da1bf6a6bd54c-e8c52be-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a/0x1c541a1c11095aa7b36cf138922da1bf6a6bd54c-e8c52be-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/bugs/bug_installation/.data/bob/a/0x1c541a1c11095aa7b36cf138922da1bf6a6bd54c-e8c52be-dev
2025-03-12T15:51:17.619594Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-12 12:51:17.619: sqlcipher_set_log: set log to stderr
2025-03-12T15:51:17.619625Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-12T15:51:17.620774Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-12T15:51:17.620840Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-12T15:51:17.620842Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-12T15:51:17.620870Z  INFO xmtp_mls::identity: Initializing identity
2025-03-12T15:51:17.621243Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [96, 244, 2, 100, 5, 145, 168, 67, 187, 104, 161, 48, 201, 111, 25, 67, 131, 210, 184, 185, 114, 80, 94, 42, 38, 24, 39, 113, 231, 10, 140, 117]), EdwardsPoint{
        X: FieldElement51([416971352290896, 113955066786807, 309592517419297, 1851539209725761, 815309276900534]),
        Y: FieldElement51([166709902189658, 626402294075201, 942686893995310, 827242284471974, 1375425263241585]),
        Z: FieldElement51([421691699080024, 486886428640514, 132590180665743, 1523170355468330, 28307958733185]),
        T: FieldElement51([1092807336302010, 317600568171789, 1786686977005136, 1379743508880881, 858747913555542])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4036323664393066393035646566616530323265303335636336653632363738313435326564316430336162316334363966633864316566323666363437373266 } }, signature_request: None, is_ready: true })
2025-03-12T15:51:17.621281Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75" inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:17.621285Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id="60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75"
2025-03-12T15:51:17.621287Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"]
2025-03-12T15:51:17.621353Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f", sequence_id: Some(73017) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:17.621399Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.621412Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-12T15:51:17.621415Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-12T15:51:17.745563Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-12T15:51:17.745884Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:17.745905Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:17.746049Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.746090Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-12T15:51:17.746529Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:17.747549Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" installation_id="d965f527f254725a4546713a06b225c794b64cc15460f9987af52c3a98676cb6"
2025-03-12T15:51:17.747878Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" installation_id="d965f527f254725a4546713a06b225c794b64cc15460f9987af52c3a98676cb6"
2025-03-12T15:51:17.749490Z  INFO xmtp_mls::client: creating sync group
2025-03-12T15:51:17.753543Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5"]
2025-03-12T15:51:17.753614Z DEBUG load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5", sequence_id: Some(64637) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:17.753657Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.753670Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3) }
2025-03-12T15:51:17.753674Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
2025-03-12T15:51:17.777356Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-12T15:51:17.777382Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:17.777386Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:17.777395Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.777402Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-12T15:51:17.777459Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:17.778113Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id="6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec"
2025-03-12T15:51:17.778188Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id="6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec"
2025-03-12T15:51:17.778281Z  INFO xmtp_mls::client: creating sync group
2025-03-12T15:51:17.780128Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"]
2025-03-12T15:51:17.780186Z DEBUG load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34", sequence_id: Some(73021) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:17.780221Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.780232Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3) }
2025-03-12T15:51:17.780235Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
2025-03-12T15:51:17.799181Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:17.799200Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-12T15:51:17.980056Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-12T15:51:17.980159Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:17.980176Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:17.980261Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.980312Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-12T15:51:17.980346Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:17.982955Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id="60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75"
2025-03-12T15:51:17.983297Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id="60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75"
2025-03-12T15:51:17.983592Z  INFO xmtp_mls::client: creating sync group
2025-03-12T15:51:17.987126Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"]
2025-03-12T15:51:17.987213Z DEBUG load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f", sequence_id: Some(73022) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:17.987275Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:17.987291Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3) }
2025-03-12T15:51:17.987295Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
2025-03-12T15:51:17.989643Z DEBUG xmtp_mls::storage::encrypted_store::association_state: Wrote association state to cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:17.993086Z DEBUG xmtp_mls::storage::encrypted_store::association_state: Wrote association state to cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:17.995522Z  INFO xmtp_mls::client: creating group
stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:51:17.751Z] [warn] [joe-a] Create XMTP client v:e8c52be 2.000s
[2025-03-12T15:51:17.751Z] [info] [joe-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:51:17.778Z] [warn] [alice-a] Create XMTP client v:e8c52be 2.028s
[2025-03-12T15:51:17.778Z] [info] [alice-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation
[2025-03-12T15:51:17.984Z] [warn] [bob-a] Create XMTP client v:e8c52be 2.233s
[2025-03-12T15:51:17.984Z] [info] [bob-a] No stream started

stdout | bugs/bug_installation/test.test.ts > bug_installation > inboxState
[2025-03-12T15:51:17.989Z] [info] Installations 4

stdout | bugs/bug_installation/test.test.ts > bug_installation > inboxState
[2025-03-12T15:51:17.993Z] [info] Installations 11


 ❯ bugs/bug_installation/test.test.ts 1/4

 Test Files 0 passed (1)
      Tests 1 failed | 0 passed (4)
   Start at 12:51:15
   Duration 2.93s
2025-03-12T15:51:18.127642Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-12T15:51:18.127747Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.127766Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.127805Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.127843Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-12T15:51:18.128604Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.129667Z  INFO load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 0}, failed_installations: [] }. New GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, failed_installations: [] }
2025-03-12T15:51:18.129740Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" from None to Some(73021)
2025-03-12T15:51:18.130164Z DEBUG load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:18.130374Z DEBUG load_mls_group_with_lock_async:fetch_key_packages: xmtp_api::mls: fetch key packages inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:18.130462Z DEBUG load_mls_group_with_lock_async:fetch_key_packages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:18.130570Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.130610Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-12T15:51:18.130720Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-12T15:51:18.132854Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-12T15:51:18.132878Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.132881Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.132888Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.132893Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-12T15:51:18.132937Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.133076Z  INFO load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5": 0}, failed_installations: [] }. New GroupMembership { members: {"9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5": 64637}, failed_installations: [] }
2025-03-12T15:51:18.133095Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" from None to Some(64637)
2025-03-12T15:51:18.134179Z  INFO xmtp_mls::groups::device_sync: Running worker..
2025-03-12T15:51:18.134187Z ERROR xmtp_mls::groups::device_sync: sync worker error group error: Installation diff error: Association error: Multiple create operations detected inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" installation_id="d965f527f254725a4546713a06b225c794b64cc15460f9987af52c3a98676cb6"
2025-03-12T15:51:18.316566Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 345 }
2025-03-12T15:51:18.316663Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.316685Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.316754Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.316882Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-12T15:51:18.316904Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.323656Z DEBUG xmtp_mls::groups::mls_sync: Adding missing installations UpdateGroupMembershipIntentData { membership_updates: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, removed_members: [], failed_installations: [] } inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec
2025-03-12T15:51:18.323731Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:18.323997Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" intent_kind=UpdateGroupMembership
2025-03-12T15:51:18.324373Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:51:18.324736Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: old group membership: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 0}
2025-03-12T15:51:18.324743Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: updated group membership: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}
2025-03-12T15:51:18.324748Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 0}, failed_installations: [] }. New GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, failed_installations: [] }
2025-03-12T15:51:18.324801Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" from None to Some(73021)
2025-03-12T15:51:18.324908Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:18.324926Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: xmtp_api::mls: fetch key packages inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:18.324966Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:18.325020Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.325049Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-12T15:51:18.325120Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-12T15:51:18.345943Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-12T15:51:18.345966Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.345969Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.345977Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.345984Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-12T15:51:18.346049Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.346055Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.346061Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-12T15:51:18.346065Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.346259Z  INFO load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}, failed_installations: [] }. New GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, failed_installations: [] }
2025-03-12T15:51:18.346284Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" from None to Some(73022)
2025-03-12T15:51:18.346472Z DEBUG load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:18.346488Z DEBUG load_mls_group_with_lock_async:fetch_key_packages: xmtp_api::mls: fetch key packages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:18.346504Z DEBUG load_mls_group_with_lock_async:fetch_key_packages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:18.346552Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.346591Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-12T15:51:18.346599Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-12T15:51:18.346676Z  INFO load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}, failed_installations: [] }. New GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021, "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, failed_installations: [] }
2025-03-12T15:51:18.346702Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" from None to Some(73021)
2025-03-12T15:51:18.349649Z DEBUG load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Wrote association state to cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:18.349670Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" from None to Some(73022)
2025-03-12T15:51:18.349775Z DEBUG load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:18.349789Z DEBUG load_mls_group_with_lock_async:fetch_key_packages: xmtp_api::mls: fetch key packages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:18.349806Z DEBUG load_mls_group_with_lock_async:fetch_key_packages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:18.349846Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.349857Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9) }
2025-03-12T15:51:18.349899Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
2025-03-12T15:51:18.669347Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 345 }
2025-03-12T15:51:18.669454Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.669476Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.669552Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.669596Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(7) }
2025-03-12T15:51:18.669619Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.679349Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34] set stored intent [1] to state `published` inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec intent.id=1 intent.kind=UpdateGroupMembership group_id="9c0d54093b7191a6b7357c8005569183"
2025-03-12T15:51:18.679588Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:18.679616Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:18.679663Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.679675Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9) }
2025-03-12T15:51:18.679719Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
2025-03-12T15:51:18.758062Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 252 }
2025-03-12T15:51:18.758148Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.758162Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.758196Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.758226Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(7) }
2025-03-12T15:51:18.758348Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.758391Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.758420Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(9) }
2025-03-12T15:51:18.758429Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.759868Z DEBUG xmtp_mls::groups::mls_sync: Adding missing installations UpdateGroupMembershipIntentData { membership_updates: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, removed_members: [], failed_installations: [] } inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75
2025-03-12T15:51:18.760031Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:18.760623Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" intent_kind=UpdateGroupMembership
2025-03-12T15:51:18.761693Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:51:18.761897Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:18.761951Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" intent_kind=UpdateGroupMembership
2025-03-12T15:51:18.762041Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: old group membership: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}
2025-03-12T15:51:18.762049Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: updated group membership: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}
2025-03-12T15:51:18.762055Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}, failed_installations: [] }. New GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, failed_installations: [] }
2025-03-12T15:51:18.762107Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" from None to Some(73022)
2025-03-12T15:51:18.762150Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:51:18.762227Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:18.762243Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: xmtp_api::mls: fetch key packages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:18.762278Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:18.762400Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: old group membership: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}
2025-03-12T15:51:18.762406Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: updated group membership: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021, "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}
2025-03-12T15:51:18.762409Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}, failed_installations: [] }. New GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021, "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, failed_installations: [] }
2025-03-12T15:51:18.762473Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" from None to Some(73021)
2025-03-12T15:51:18.762554Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:18.762564Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" from None to Some(73022)
2025-03-12T15:51:18.762604Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:18.762615Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: xmtp_api::mls: fetch key packages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:18.762629Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:18.762658Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.762671Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.762677Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11) }
2025-03-12T15:51:18.762681Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-12T15:51:18.762729Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
2025-03-12T15:51:18.762733Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13), flags: (0x1: END_STREAM) }
2025-03-12T15:51:18.859734Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 5400 }
2025-03-12T15:51:18.859843Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.859860Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:18.869271Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:18.869343Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(9) }
2025-03-12T15:51:18.869360Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:18.869580Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34] published intent [1] of type [UpdateGroupMembership] intent.id=1 intent.kind=UpdateGroupMembership inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183"

 ❯ bugs/bug_installation/test.test.ts 1/4

 Test Files 0 passed (1)
      Tests 1 failed | 0 passed (4)
   Start at 12:51:15
   Duration 3.94s
2025-03-12T15:51:19.178826Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 588 }
2025-03-12T15:51:19.178926Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.178945Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.178986Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.179025Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(11) }
2025-03-12T15:51:19.179049Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.179185Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.179225Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(13) }
2025-03-12T15:51:19.179239Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.186948Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] set stored intent [1] to state `published` inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 intent.id=1 intent.kind=UpdateGroupMembership group_id="a0a827fec8a91d96da76811830c8ea35"
2025-03-12T15:51:19.187272Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:19.187314Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.187384Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.187403Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15) }
2025-03-12T15:51:19.187454Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15), flags: (0x1: END_STREAM) }
2025-03-12T15:51:19.188591Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] set stored intent [2] to state `published` inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 intent.id=2 intent.kind=UpdateGroupMembership group_id="81fd1538473e116a03157ae0c79fa104"
2025-03-12T15:51:19.188684Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:19.188699Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.188726Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.188753Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17) }
2025-03-12T15:51:19.188800Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17), flags: (0x1: END_STREAM) }
2025-03-12T15:51:19.249574Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 29 }
2025-03-12T15:51:19.249664Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.249675Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.249734Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.249764Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(11) }
2025-03-12T15:51:19.250087Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.251777Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash c3c29dd57993341c08b7f9043d9f747243a3c89ab1ba8b5a1d5b1fe13604edc4, id = 397058 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183" cursor=397058
2025-03-12T15:51:19.251822Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34] is about to process own envelope [397058] for intent [1] inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183" cursor=397058 intent_id=1 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.252626Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34] Validating commit for intent 1. Message timestamp: 1741794678831930000
2025-03-12T15:51:19.252750Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::validated_commit: Group context extensions proposal found: GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, failed_installations: [] }
2025-03-12T15:51:19.252774Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 0}, failed_installations: [] }. New GroupMembership { members: {"f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, failed_installations: [] }
2025-03-12T15:51:19.253033Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" from None to Some(73021)
2025-03-12T15:51:19.253167Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:19.253219Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:19.253249Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:19.253325Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34]-[9c0d54093b7191a6b7357c8005569183] processing own message for intent 1 / UpdateGroupMembership, message_epoch: 0 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183" cursor=397058 intent.id=1 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.253332Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34] merging pending commit for intent 1
2025-03-12T15:51:19.254345Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:51:19.254367Z  INFO sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction completed successfully: process for group [9c0d54093b7191a6b7357c8005569183] envelope cursor[397058]
2025-03-12T15:51:19.254496Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: taking post commit action inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec intent.id=1 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.255827Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: total welcome message proto bytes=6106
2025-03-12T15:51:19.255841Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: welcome chunk_size=7727
2025-03-12T15:51:19.255847Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: xmtp_api::mls: send welcome messages inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:19.255891Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.255920Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.256008Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-12T15:51:19.256074Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-12T15:51:19.256101Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-12T15:51:19.256226Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-12T15:51:19.256239Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13), flags: (0x1: END_STREAM) }
2025-03-12T15:51:19.377487Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2831 }
2025-03-12T15:51:19.377596Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.377614Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.384370Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.384451Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(15) }
2025-03-12T15:51:19.384477Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.384656Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] published intent [1] of type [UpdateGroupMembership] intent.id=1 intent.kind=UpdateGroupMembership inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="a0a827fec8a91d96da76811830c8ea35"
2025-03-12T15:51:19.389113Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: Commit sent. Stopping further publishes for this round
2025-03-12T15:51:19.390083Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(0) group_id="a0a827fec8a91d96da76811830c8ea35"}: xmtp_api::mls: query group messages group_id="a0a827fec8a91d96da76811830c8ea35" id_cursor=0 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:19.390147Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(0) group_id="a0a827fec8a91d96da76811830c8ea35"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.390199Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(19), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.390215Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(19) }
2025-03-12T15:51:19.390218Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(19), flags: (0x1: END_STREAM) }
2025-03-12T15:51:19.442530Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16384 }
2025-03-12T15:51:19.442589Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.442604Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.442617Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(13), size_increment: 16384 }
2025-03-12T15:51:19.572139Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.572211Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(17) }
2025-03-12T15:51:19.572232Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(17), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.572358Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] published intent [2] of type [UpdateGroupMembership] intent.id=2 intent.kind=UpdateGroupMembership inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="81fd1538473e116a03157ae0c79fa104"
2025-03-12T15:51:19.572422Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: Commit sent. Stopping further publishes for this round
2025-03-12T15:51:19.573790Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(0) group_id="81fd1538473e116a03157ae0c79fa104"}: xmtp_api::mls: query group messages group_id="81fd1538473e116a03157ae0c79fa104" id_cursor=0 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:19.573875Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(0) group_id="81fd1538473e116a03157ae0c79fa104"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.573971Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(21), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.574012Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(21) }
2025-03-12T15:51:19.574027Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(21), flags: (0x1: END_STREAM) }
2025-03-12T15:51:19.619069Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16384 }
2025-03-12T15:51:19.619132Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(13), size_increment: 16384 }
2025-03-12T15:51:19.626580Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16384 }
2025-03-12T15:51:19.626619Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(13), size_increment: 16384 }
2025-03-12T15:51:19.671971Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.672045Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(13) }
2025-03-12T15:51:19.672066Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.675616Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: xmtp_api::mls: query group messages group_id="9c0d54093b7191a6b7357c8005569183" id_cursor=397058 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:19.675659Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.675692Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.675705Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15) }
2025-03-12T15:51:19.675710Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15), flags: (0x1: END_STREAM) }
2025-03-12T15:51:19.756519Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 7205 }
2025-03-12T15:51:19.756617Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.756658Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.756713Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(19), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.756754Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(19) }
2025-03-12T15:51:19.756777Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(19), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.758147Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash 04f5129abad9af755ffad9f71a18c2e009a2b6bc7cb113131d9f55851da9f7a9, id = 397059 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="a0a827fec8a91d96da76811830c8ea35" cursor=397059
2025-03-12T15:51:19.758193Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] is about to process own envelope [397059] for intent [1] inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="a0a827fec8a91d96da76811830c8ea35" cursor=397059 intent_id=1 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.759467Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] Validating commit for intent 1. Message timestamp: 1741794679350297000
2025-03-12T15:51:19.759605Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::validated_commit: Group context extensions proposal found: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, failed_installations: [] }
2025-03-12T15:51:19.759632Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}, failed_installations: [] }. New GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, failed_installations: [] }
2025-03-12T15:51:19.760014Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" from None to Some(73022)
2025-03-12T15:51:19.760312Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:19.760426Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:19.760461Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:19.760609Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f]-[a0a827fec8a91d96da76811830c8ea35] processing own message for intent 1 / UpdateGroupMembership, message_epoch: 0 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="a0a827fec8a91d96da76811830c8ea35" cursor=397059 intent.id=1 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.760630Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] merging pending commit for intent 1
2025-03-12T15:51:19.761985Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:51:19.762020Z  INFO sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction completed successfully: process for group [a0a827fec8a91d96da76811830c8ea35] envelope cursor[397059]
2025-03-12T15:51:19.762155Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: taking post commit action inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 intent.id=1 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.762549Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: total welcome message proto bytes=2673
2025-03-12T15:51:19.762553Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: welcome chunk_size=17652
2025-03-12T15:51:19.762558Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: xmtp_api::mls: send welcome messages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:19.762591Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.762646Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(23), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.762663Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(23) }
2025-03-12T15:51:19.762728Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(23), flags: (0x1: END_STREAM) }
2025-03-12T15:51:19.792370Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 56855 }
2025-03-12T15:51:19.792395Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), initial_window_size: 122390 }
2025-03-12T15:51:19.792398Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:19.943038Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(21), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.943239Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(21) }
2025-03-12T15:51:19.943273Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(21), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.945066Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash c25417359ca84ab3283d4130b5e7604d263527e8d698a9aec82db0d66060055c, id = 397060 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="81fd1538473e116a03157ae0c79fa104" cursor=397060
2025-03-12T15:51:19.945097Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] is about to process own envelope [397060] for intent [2] inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="81fd1538473e116a03157ae0c79fa104" cursor=397060 intent_id=2 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.945948Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] Validating commit for intent 2. Message timestamp: 1741794679534377000
2025-03-12T15:51:19.946079Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::validated_commit: Group context extensions proposal found: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022, "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, failed_installations: [] }
2025-03-12T15:51:19.946104Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}, failed_installations: [] }. New GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022, "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, failed_installations: [] }
2025-03-12T15:51:19.946308Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" from None to Some(73021)
2025-03-12T15:51:19.946591Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:19.946634Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" from None to Some(73022)
2025-03-12T15:51:19.946830Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:19.946920Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f 73022
2025-03-12T15:51:19.946941Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:19.947005Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f]-[81fd1538473e116a03157ae0c79fa104] processing own message for intent 2 / UpdateGroupMembership, message_epoch: 0 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 group_id="81fd1538473e116a03157ae0c79fa104" cursor=397060 intent.id=2 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.947013Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f] merging pending commit for intent 2
2025-03-12T15:51:19.947227Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f]: Storing a transcript message with 1 members added and 0 members removed and 0 metadata changes
2025-03-12T15:51:19.948472Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:51:19.948503Z  INFO sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction completed successfully: process for group [81fd1538473e116a03157ae0c79fa104] envelope cursor[397060]
2025-03-12T15:51:19.948664Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: taking post commit action inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id=60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75 intent.id=2 intent.kind=UpdateGroupMembership
2025-03-12T15:51:19.950642Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: total welcome message proto bytes=8062
2025-03-12T15:51:19.950648Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: welcome chunk_size=5852
2025-03-12T15:51:19.950654Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: xmtp_api::mls: send welcome messages inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:19.950703Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.950773Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(25), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.950792Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:19.950867Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:19.950884Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:19.950899Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:19.955298Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 8092 }
2025-03-12T15:51:19.955314Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.955317Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.955321Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:19.966450Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 12076 }
2025-03-12T15:51:19.966471Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.966474Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:19.966481Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.966488Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(15) }
2025-03-12T15:51:19.966543Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:19.966676Z  INFO xmtp_mls::groups::device_sync: Sending a sync request for Consent inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id="6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec"
2025-03-12T15:51:19.966997Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: xmtp_api::mls: query group messages group_id="9c0d54093b7191a6b7357c8005569183" id_cursor=397058 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:19.967018Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:19.967037Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(23), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:19.967041Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(23) }
2025-03-12T15:51:19.967045Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(23), flags: (0x5: END_HEADERS | END_STREAM) }

 ❯ bugs/bug_installation/test.test.ts 1/4

 Test Files 0 passed (1)
      Tests 1 failed | 0 passed (4)
   Start at 12:51:15
   Duration 4.95s
2025-03-12T15:51:20.136425Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" installation_id="d965f527f254725a4546713a06b225c794b64cc15460f9987af52c3a98676cb6"
2025-03-12T15:51:20.137136Z  INFO xmtp_mls::groups::device_sync: Device sync initialized. inbox_id="9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" installation_id="d965f527f254725a4546713a06b225c794b64cc15460f9987af52c3a98676cb6"
2025-03-12T15:51:20.340607Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16384 }
2025-03-12T15:51:20.340696Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(25), size_increment: 113050 }
2025-03-12T15:51:20.340732Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:20.340881Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(27) }
2025-03-12T15:51:20.350015Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-12T15:51:20.350065Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:20.350076Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:20.350109Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:20.350136Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(17) }
2025-03-12T15:51:20.350515Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(17), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:20.351035Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: xmtp_api::mls: query group messages group_id="9c0d54093b7191a6b7357c8005569183" id_cursor=397058 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:20.351068Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:20.351116Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(19), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:20.351163Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(19) }
2025-03-12T15:51:20.351190Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(19), flags: (0x1: END_STREAM) }
2025-03-12T15:51:20.532988Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16384 }
2025-03-12T15:51:20.533083Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:20.722244Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16384 }
2025-03-12T15:51:20.722393Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(27) }
2025-03-12T15:51:20.722415Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:20.722675Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25), flags: (0x1: END_STREAM) }
2025-03-12T15:51:20.722755Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(27), flags: (0x1: END_STREAM) }
2025-03-12T15:51:20.741072Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-12T15:51:20.741091Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:20.741094Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:20.741102Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(19), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:20.741108Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(19) }
2025-03-12T15:51:20.741169Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(19), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:20.741432Z DEBUG xmtp_mls::groups: No queryable content fields, msg not formatted as encoded content
2025-03-12T15:51:20.741437Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:20.741484Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" intent_kind=SendMessage
2025-03-12T15:51:20.742100Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed

 ❯ bugs/bug_installation/test.test.ts 1/4

 Test Files 0 passed (1)
      Tests 1 failed | 0 passed (4)
   Start at 12:51:15
   Duration 5.96s
2025-03-12T15:51:21.088054Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 65477 }
2025-03-12T15:51:21.088158Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), initial_window_size: 131012 }
2025-03-12T15:51:21.088178Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-12T15:51:21.088198Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16383 }
2025-03-12T15:51:21.088209Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.088309Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.136398Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 261 }
2025-03-12T15:51:21.136541Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.136562Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.136605Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(21), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.136644Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(21) }
2025-03-12T15:51:21.137002Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(21), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:21.137410Z  INFO publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34] published intent [2] of type [SendMessage] intent.id=2 intent.kind=SendMessage inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183"
2025-03-12T15:51:21.137558Z  INFO xmtp_mls::groups::device_sync: Sending a sync request for MessageHistory inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id="6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec"
2025-03-12T15:51:21.140295Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: xmtp_api::mls: query group messages group_id="9c0d54093b7191a6b7357c8005569183" id_cursor=397058 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:21.140497Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397058) group_id="9c0d54093b7191a6b7357c8005569183"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:21.140623Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(23), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.140664Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(23) }
2025-03-12T15:51:21.140673Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(23), flags: (0x1: END_STREAM) }
2025-03-12T15:51:21.462427Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 32768 }
2025-03-12T15:51:21.536158Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-12T15:51:21.536266Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.536283Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.536346Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(23), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.536399Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(23) }
2025-03-12T15:51:21.536424Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(23), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:21.537237Z  INFO sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash fa84a00220799b33a158abf8c237924b765602a34ef53afc756a97711bab10fc, id = 397061 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183" cursor=397061
2025-03-12T15:51:21.537275Z  INFO sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34] is about to process own envelope [397061] for intent [2] inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183" cursor=397061 intent_id=2 intent.kind=SendMessage
2025-03-12T15:51:21.538464Z DEBUG sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:21.538634Z DEBUG sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34]-[9c0d54093b7191a6b7357c8005569183] processing own message for intent 2 / SendMessage, message_epoch: 1 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" installation_id=6bc4960e140630e11a4eef0ef0c3270910af3b80824f7bc5d6e3e037cb6013ec group_id="9c0d54093b7191a6b7357c8005569183" cursor=397061 intent.id=2 intent.kind=SendMessage
2025-03-12T15:51:21.539981Z DEBUG sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-12T15:51:21.540058Z  INFO sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction completed successfully: process for group [9c0d54093b7191a6b7357c8005569183] envelope cursor[397061]
2025-03-12T15:51:21.541633Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397061) group_id="9c0d54093b7191a6b7357c8005569183"}: xmtp_api::mls: query group messages group_id="9c0d54093b7191a6b7357c8005569183" id_cursor=397061 inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"
2025-03-12T15:51:21.541671Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397061) group_id="9c0d54093b7191a6b7357c8005569183"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:21.541728Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(25), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.541754Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:21.541776Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(25), flags: (0x1: END_STREAM) }
2025-03-12T15:51:21.647401Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(27), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.647527Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(27) }
2025-03-12T15:51:21.647554Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(27), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:21.648335Z  INFO xmtp_mls::groups::device_sync: Sending a sync request for Consent inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" installation_id="60f402640591a843bb68a130c96f194383d2b8b972505e2a26182771e70a8c75"
2025-03-12T15:51:21.649788Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397059) group_id="a0a827fec8a91d96da76811830c8ea35"}: xmtp_api::mls: query group messages group_id="a0a827fec8a91d96da76811830c8ea35" id_cursor=397059 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:21.649878Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397059) group_id="a0a827fec8a91d96da76811830c8ea35"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:21.650021Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(29), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.650078Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(29) }
2025-03-12T15:51:21.650092Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(29), flags: (0x1: END_STREAM) }
2025-03-12T15:51:21.717035Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(25), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.717158Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:21.717186Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(25), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:21.723055Z  INFO xmtp_mls::client: creating group

 ❯ bugs/bug_installation/test.test.ts 2/4

 Test Files 0 passed (1)
      Tests 1 failed | 1 passed (4)
   Start at 12:51:15
   Duration 6.67s
2025-03-12T15:51:21.840054Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 14818 }
2025-03-12T15:51:21.840075Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.840078Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.840087Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(29), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.840094Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(29) }
2025-03-12T15:51:21.840172Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(29), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:21.840704Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397059) group_id="a0a827fec8a91d96da76811830c8ea35"}: xmtp_api::mls: query group messages group_id="a0a827fec8a91d96da76811830c8ea35" id_cursor=397059 inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f"
2025-03-12T15:51:21.840728Z DEBUG sync_with_conn:receive:query_group_messages{id_cursor=Some(397059) group_id="a0a827fec8a91d96da76811830c8ea35"}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:21.840759Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(33), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.840770Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(33) }
2025-03-12T15:51:21.840774Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(33), flags: (0x1: END_STREAM) }
2025-03-12T15:51:21.933702Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-12T15:51:21.933725Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.933728Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:21.933736Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(25), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:21.933742Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(25) }
2025-03-12T15:51:21.933807Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(25), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:21.934051Z DEBUG xmtp_mls::groups: No queryable content fields, msg not formatted as encoded content
2025-03-12T15:51:21.934056Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:21.934091Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" intent_kind=SendMessage
2025-03-12T15:51:21.934666Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed

 ❯ bugs/bug_installation/test.test.ts 2/4

 Test Files 0 passed (1)
      Tests 1 failed | 1 passed (4)
   Start at 12:51:15
   Duration 6.97s
2025-03-12T15:51:22.025842Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(31), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:22.025877Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(31) }
2025-03-12T15:51:22.025883Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(31), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:22.026800Z  INFO load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 0}, failed_installations: [] }. New GroupMembership { members: {"9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5": 64637, "626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f": 73022}, failed_installations: [] }
2025-03-12T15:51:22.026830Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" from None to Some(64637)
2025-03-12T15:51:22.028282Z  INFO xmtp_mls::client: creating group
2025-03-12T15:51:22.028291Z  INFO xmtp_mls::client: creating group
2025-03-12T15:51:22.030394Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5", "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34"]
2025-03-12T15:51:22.030466Z DEBUG load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5", sequence_id: Some(64637) }, GetIdentityUpdatesV2Filter { inbox_id: "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34", sequence_id: None }] len=2}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:22.030470Z  INFO xmtp_mls::groups::device_sync: Outgoing preference update [ConsentUpdate(StoredConsentRecord { entity_type: ConversationId, state: Allowed, entity: "6b50561951d69f000e23a7747349769f" })]
2025-03-12T15:51:22.030508Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:22.030519Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-12T15:51:22.030523Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-12T15:51:22.030699Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5"]
2025-03-12T15:51:22.030740Z DEBUG load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5", sequence_id: Some(64637) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-12T15:51:22.030761Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:22.030767Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-12T15:51:22.030768Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-12T15:51:22.200234Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 145 }
2025-03-12T15:51:22.200366Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:22.200385Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:22.200427Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:22.200465Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-12T15:51:22.200488Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:22.204021Z  INFO load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5": 0}, failed_installations: [] }. New GroupMembership { members: {"9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5": 64637, "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34": 73021}, failed_installations: [] }
2025-03-12T15:51:22.204132Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34" from None to Some(73021)
2025-03-12T15:51:22.208371Z DEBUG load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Wrote association state to cache: f72ab155dd93373f9d927d4b092c3c7ec6b01cd76c27a970cb3af86f00889f34 73021
2025-03-12T15:51:22.208407Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "9fd5ca2a522d35fd12ae80e6d38704d4fc832bb2cae82ebf5fb4c5364f1722f5" from None to Some(64637)
2025-03-12T15:51:22.209610Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 178 }
2025-03-12T15:51:22.209625Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:22.209627Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-12T15:51:22.209635Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(33), flags: (0x4: END_HEADERS) }
2025-03-12T15:51:22.209641Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(33) }
2025-03-12T15:51:22.209709Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(33), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-12T15:51:22.210047Z DEBUG xmtp_mls::groups: No queryable content fields, msg not formatted as encoded content
2025-03-12T15:51:22.210053Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-12T15:51:22.210103Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="626d90f905defae022e035cc6e626781452ed1d03ab1c469fc8d1ef26f64772f" intent_kind=SendMessage
2025-03-12T15:51:22.210327Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
 ❯ bugs/bug_installation/test.test.ts (4 tests | 3 failed) 6491ms
   × bug_installation > inboxState 10ms
     → Association error: Multiple create operations detected
   ✓ bug_installation > should create a group with bob and alice 3727ms
   × bug_installation > should create a group with bob and alice 305ms
     → ClientError: Installation diff error: Association error: Multiple create operations detected
   × bug_installation > joe with alice 182ms
     → ClientError: Installation diff error: Association error: Multiple create operations detected

 ❯ bugs/bug_installation/test.test.ts 4/4


⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  bugs/bug_installation/test.test.ts > bug_installation > inboxState
Error: Association error: Multiple create operations detected
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  bugs/bug_installation/test.test.ts > bug_installation > should create a group with bob and alice
 FAIL  bugs/bug_installation/test.test.ts > bug_installation > joe with alice
Error: ClientError: Installation diff error: Association error: Multiple create operations detected
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯


 Test Files  1 failed (1)
      Tests  3 failed | 1 passed (4)
   Start at  12:51:15
   Duration  7.21s (transform 61ms, setup 0ms, collect 600ms, tests 6.49s, environment 0ms, prepare 31ms)

fabrizioguespe@fabrizios-MacBook-Pro qa-testing % 